from aiogram import types
from aiogram.dispatcher.filters import CommandStart, ChatTypeFilter
from asyncpg import UniqueViolationError

from loader import dp

from utils import sql_commands

from keyboards import start_kb


@dp.message_handler(ChatTypeFilter(chat_type=types.ChatType.PRIVATE), CommandStart())
async def start_bot(message: types.Message):
    bot_username = await dp.bot.get_me()
    await message.answer('''
<b>ü§ñ –ß—Ç–æ —É–º–µ–µ—Ç —ç—Ç–æ—Ç –±–æ—Ç?</b>
üëâ –ë–æ—Ç –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —á–∞—Ç–∞, –ø–æ–∫–∞ –æ–Ω–∞ –Ω–µ –ø–æ–¥–ø–∏—à—É—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª –∏–ª–∏ —á–∞—Ç.

<b>‚ùóÔ∏è –ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:</b>
<i>1) –î–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤ –∫–∞–Ω–∞–ª/—á–∞—Ç –∏ —Å–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–æ–º
2) –ü—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /add (@USERNAME), —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–Ω–∞–ª/—á–∞—Ç –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, –∏ –≤ —ç—Ç–æ–º –∂–µ –∫–∞–Ω–∞–ª–µ/—á–∞—Ç–µ –±—É–¥–µ—Ç –≤—ã—Ö–æ–¥–∏—Ç—å —Ç–∞–±–ª–∏—á–∫–∞: (@USERNAME), –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–∏ —á–∞—Ç—ã, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ!
3) –ß—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Ç–∞–±–ª–∏—á–∫—É —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≤–∞—à–µ–º —á–∞—Ç–µ, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É /delete</i>

<b>ü§ñ –ë–æ–ª—å—à–µ –±–æ—Ç–æ–≤: @BarlSoft
üßë‚Äçüíª –ö–æ–¥–µ—Ä: @BarlCoder</b>''',
                         reply_markup=await start_kb(bot_username.username)
                         )
